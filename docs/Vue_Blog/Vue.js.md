# Vueçš„ç”Ÿå‘½å‘¨æœŸ

[toc]

## å®˜æ–¹å›¾ä¾‹

![](./Vue_img/lifecycle.png)

>   ä¸å»ºè®®ä½¿ç”¨ç®­å¤´å‡½æ•°æ¥å®šä¹‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•



## å›¾ä¾‹è¯¦è§£



### ç”Ÿå‘½å‘¨æœŸçŠ¶æ€

#### new Vue()

```javascript
// å¼€å§‹åˆ›å»ºä¸€ä¸ª Vue çš„å®ä¾‹å¯¹è±¡
var vm = new Vue({
    el: '#app',
    data: {},
    beforeCreated() {},
    .
    .
    .
    methods:{}
})
```



#### Init Events & Lifecycle

-   åˆå§‹åŒ–äº†ä¸€ä¸ª ``Vue`` çš„ç©ºçš„å®ä¾‹å¯¹è±¡
-   æ­¤å¯¹è±¡åªæœ‰é»˜è®¤çš„ç”Ÿå‘½é’©å­å’Œé»˜è®¤äº‹ä»¶ï¼Œå…¶å®ƒè¿˜æ²¡æœ‰åˆ›å»º



#### Init injections & reactivity

-   

-   `initInjections(vm)ã€initState(vm)ã€initProvide(vm)`ï¼šåˆå§‹åŒ–æ•°æ®: ``injectã€stateã€provide``
-   ``initState`` çš„ä½œç”¨æ˜¯åˆå§‹åŒ– ``propsã€dataã€methodsã€watchã€computed`` ç­‰å±æ€§ã€‚



#### æ¨¡æ¿ç¼–è¯‘

-   å°†å†…å­˜ä¸­çš„æ•°æ®ç­‰ï¼Œç¼–è¯‘æ¨¡æ¿ï¼Œå†æ¸²æŸ“æˆDOM
-   è¿˜æ²¡æœ‰æŒ‚è½½åˆ°é¡µé¢ä¸­å»



#### Create vm.$el and replace "el" with it

-   å°†ä¸Šé¢å†…å­˜ä¸­ç¼–è¯‘å¥½çš„æ¨¡æ¿ï¼Œæ›¿æ¢åˆ°å½“å‰é¡µé¢ä¸­å»



#### Mounted (å®ä¾‹çŠ¶æ€)

-   ç»„ä»¶ è¿è¡Œé˜¶æ®µ ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š ``beforeUpdate`` å’Œ ``updated``
-   å®æ—¶ç›‘æ§æ•°æ®ï¼Œå³æ—¶æ›´æ–° DOM



#### Virtual DOM re-render and patch

-   æ ¹æ® ``data`` ä¸­çš„æ•°æ®ï¼Œåœ¨å†…å­˜ä¸­é‡æ–°æ¸²æŸ“ä¸€ä»½æœ€æ–°çš„ ``DOM tree`` 
-   å°†æ–°çš„ ``DOM tree`` æ¸²æŸ“åˆ°å½“å‰é¡µé¢ä¸­
-   å®Œæˆ``data`` => ``view`` æ›´æ–°



### ç”Ÿå‘½å‘¨æœŸé’©å­ - åˆ›å»ºï¼š

#### beforeCreate

-    DOMæ¸²æŸ“ï¼Œ``data`` å’Œ ``methods`` åˆå§‹åŒ–ä¹‹å‰ã€‚



#### created

-   ``data`` å’Œ ``methods`` åˆå§‹åŒ–å®Œæˆï¼ŒDOMæ¸²æŸ“å®Œæˆï¼ˆæœªæŒ‚è½½ï¼‰ã€‚
-   å¯ä»¥åœ¨æ­¤è¿›è¡Œé¡µé¢åˆå§‹åŒ–è¯·æ±‚å¹¶æ¸²æŸ“ï¼Œä½†è¯·æ±‚è¿‡å¤šæœ‰å¯èƒ½ä¼šä½¿é¡µé¢åŠ è½½é€Ÿåº¦å˜æ…¢ï¼Œç”¨æˆ·æ„ŸçŸ¥ç•¥å·®ã€‚



#### beforeMount

-   DOMä»ç„¶æœªæŒ‚è½½ï¼Œç›¸å…³çš„ ``render`` å‡½æ•°é¦–æ¬¡è¢«è°ƒç”¨ ã€‚
-   æ¨¡æ¿å·²ç»ç¼–è¾‘å®Œæˆï¼Œä½†æ˜¯ ``{{ }}`` åªæ˜¯å ä½ï¼Œå¹¶æ²¡æœ‰æŠŠæ•°æ®æ¸²æŸ“è¿›é¡µé¢ä¸­å»ã€‚



#### mounted

-   æ•°æ®å’ŒDOMå®ŒæˆæŒ‚è½½ï¼Œå®ä¾‹å®Œå…¨åˆ›å»ºå®Œæˆã€‚å¦‚æœæœ‰éœ€è¦æ“ä½œé¡µé¢DOMï¼Œæœ€æ—©åœ¨æ­¤ç”Ÿå‘½å‘¨æœŸå‡½æ•°æ“ä½œã€‚
-   å¯ä»¥åœ¨æ­¤è¯·æ±‚æ•°æ®ï¼Œç„¶åæ•°æ®å¯ä»¥æ¸²æŸ“è¿›å½“å‰é¡µé¢é‡Œ
-   åªä¼šæ‰§è¡Œä¸€æ¬¡



### ç”Ÿå‘½å‘¨æœŸé’©å­ - è¿è¡Œï¼š

#### beforeUpdate

-   ç»„ä»¶è¿è¡Œé˜¶æ®µ

-   æ˜¾ç¤ºçš„æ•°æ®ä¸å†…å­˜ä¸­çš„æ•°æ®æ²¡æœ‰åŒæ­¥ï¼Œæ˜¾ç¤ºçš„æ•°æ®è¿˜æ²¡æœ‰æ›´æ–°
-   é¡µé¢æ•°æ®æ›´æ–°éƒ½ä¼šè§¦å‘



#### update

-   ç»„ä»¶è¿è¡Œé˜¶æ®µ
-   æ˜¾ç¤ºæ•°æ®å·²æ›´æ–°ï¼Œä¸å†…å­˜ä¸­çš„æ•°æ®ä¿æŒä¸€è‡´
-   é¡µé¢æ•°æ®æ›´æ–°éƒ½ä¼šè§¦å‘ï¼Œæ•°æ®æ›´æ–°å®Œæ¯•
-   è°¨æ…ä½¿ç”¨ï¼Œå¯¹æ€§èƒ½å½±å“è¾ƒå¤§



### ç”Ÿå‘½å‘¨æœŸé’©å­ - é”€æ¯ï¼š

#### beforeDestory

-   Vueå®ä¾‹é”€æ¯å‰è°ƒç”¨
-   å®ä¾‹æ‰€æœ‰çš„``data``ä¸``methods``ç­‰ï¼Œä¾æ—§å¯ç”¨ã€‚



#### destroyed

-   Vueå®ä¾‹è¢«é”€æ¯åè°ƒç”¨
-    è°ƒç”¨åï¼ŒVue å®ä¾‹æŒ‡ç¤ºçš„æ‰€æœ‰ä¸œè¥¿éƒ½ä¼šè§£ç»‘ï¼Œæ‰€æœ‰çš„äº‹ä»¶ç›‘å¬å™¨ä¼šè¢«ç§»é™¤ï¼Œæ‰€æœ‰çš„å­å®ä¾‹ä¹Ÿä¼šè¢«é”€æ¯ 



>   åªæœ‰åˆæ¬¡æ¸²æŸ“ä¼šåœ¨æœåŠ¡ç«¯è¿›è¡Œï¼Œ beforeCreate å’Œ created



## ç”Ÿå‘½å‘¨æœŸç›¸å…³çŸ¥è¯†ç‚¹











# Vue.js äº‹ä»¶



## äº‹ä»¶å¤„ç†

### javascript å¯ç›´æ¥å¼•ç”¨å®ä¾‹é‡Œçš„æ–¹æ³•

```javascript
var vm = new Vue({
    el: 'app',
    data:{
        name: 'Vue.js'
    },
    methods:{
        greet: function(event) {
            console.log('Hi')
        }
    }
})
// ç›´æ¥å¼•ç”¨greet
vm.greet()
```



### å†…è”è¯­å¥å¤„ç†å™¨è®¿é—®åŸå§‹DOMäº‹ä»¶

-   ç”¨ç‰¹æ®Šå˜é‡ ``$event`` æŠŠåŸå§‹DOMä¼ å…¥æ–¹æ³•ä¸­å»

```html
<button v-on:click="warn('Form cannot be submitted yet.', $event)">
  Submit
</button>
```

```javascript
// ...
methods: {
  warn: function (message, event) {
    // ç°åœ¨å¯ä»¥è®¿é—®åŸç”Ÿäº‹ä»¶å¯¹è±¡
    if (event) event.preventDefault()
    alert(message)
  }
}
```



### äº‹ä»¶ä¿®é¥°ç¬¦ï¼ŒæŒ‰é”®ä¿®é¥°ç¬¦

ğŸ”¨ing...





# è®¡ç®—å±æ€§(computed)ï¼Œæ–¹æ³•(methods)ï¼Œä¾¦å¬å™¨(watcher)



## è®¡ç®—å±æ€§ computed



###  computed çš„ setter

 è®¡ç®—å±æ€§é»˜è®¤åªæœ‰ getter ï¼Œä¹Ÿå¯ä»¥æä¾› setter

```javascript
// ...
computed: {
  fullName: {
    // getter
    get: function () {
      return this.firstName + ' ' + this.lastName
    },
    // setter
    set: function (newValue) {
      var names = newValue.split(' ')
      this.firstName = names[0]
      this.lastName = names[names.length - 1]
    }
  }
}
// ...
```

 ç°åœ¨å†è¿è¡Œ `vm.fullName = 'John Doe'` æ—¶ï¼Œsetter ä¼šè¢«è°ƒç”¨ï¼Œ`vm.firstName` å’Œ `vm.lastName` ä¹Ÿä¼šç›¸åº”åœ°è¢«æ›´æ–°ã€‚ 



### computedç¼“å­˜


-   åŸºäºä¾èµ–è¿›è¡Œç¼“å­˜ã€‚

-   åªæœ‰å®ƒçš„ç›¸å…³ä¾èµ–å‘ç”Ÿæ”¹å˜æ—¶æ‰ä¼šé‡æ–°æ±‚å€¼ã€‚

-   å‡è®¾ä¾èµ–çš„ ``data`` æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œ``computed`` éƒ½ä¼šç«‹å³è¿”å›ä¹‹å‰çš„è®¡ç®—ç»“æœï¼Œè€Œä¸å¿…å†æ¬¡æ‰§è¡Œå‡½æ•°ã€‚

-   ``Date.now()`` ä¸æ˜¯å“åº”å¼ä¾èµ–ï¼Œå› æ­¤ä¸ä¼šæ›´æ–°ã€‚

    ```javascript
    computed: {
        now: function() {
            return Date.now()
        }
    }
    ```

    

    